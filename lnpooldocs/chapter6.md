# 6 Lightning Pool: A Channel Liquidity Market- place as a Shadow Chain

In this section, we build upon the prior sections outlining the abstract Channel Lease Marketplace deﬁnition, as well as shadowchain operation, and construct our Lightning Pool implementation at a low-level. We ﬁrst begin by detailing our implementation of the CLM algorithms, as well as our choice of certain free parameters. With this concrete structure in place, we’ll then go up a layer of ab- straction to demonstrate how Lightning Pool can be operated as a shadowchain on Bitcoin today, without any further modiﬁcations enhancements.

## 6.1 Instantiating a CLM

### 6.1.1 System Initialization

#### Batch Key Parameter

Before an instance of Lightning Pool can be used by willing agents, the system must ﬁrst be initialized. This operation can be performed only by the Orchestrator of the auctioneer. Within the system, we’ll utilize an incremented Elliptic Curve point which we refer to as the batchID for several operations. The batchID serves to uniquely identiﬁed a given batch, and is incremented after each successful batch.

The batchID itself is a nothing up my sleeve (NUMS) point which has been generated in a manner that no one, not even the auctioneer knows the discrete log to. The raw serialized batchID (for the very ﬁrst batch) within the Lightning Pool system can be expressed in the following syntax (displayed using hex-encoding of a compressed key encoding of the batch key itself):

```
Bk = NUMSgen(1λ)
```

Let the current batchID for the nth batch be Bk . Let G be a cyclic group of order prime order p, generated by an element G. We now deﬁne two helper functions to allow us to ”seek” round the batchID key-space:

![Figure6_1_1](figures/figure6_1_1.png?raw=true "Figure6_1_1")
