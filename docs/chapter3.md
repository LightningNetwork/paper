## 3.Bidirectional Payment Channels
## 3. 双向支付通道

Micropayment channels permit a simple defdeerral of a transaction state to be broadcast at a later time. The contracts are enforced by creating a responsibility for one party to broadcast transactions before or after certain dates. If the blockchain is a decentralized timestamping system, it is possible to use clocks as a component of decentralized consensus[5] to determine data validity, as well as present states as a method to order events[6].

> 微支付通道允许将一笔交易简单的延迟到以后广播。这些合约的执行方式是：让一方必须在特定日期之前或之后广播交易。如果区块链是一个去中心化的时间戳系统，那么可以使用时间戳作为去中心化共识的一个部分来确定数据的有效性，这相当于解决了当前状态的时序同步问题[6]。

By creating timeframes where certain states can be broadcast and later invalidated, it is possible to create complex contracts using bitcoin transaction scripts. There has been prior work for Hub-and-Spoke Micro- payment Channels[7][8][9] (and trusted payment channel networks[10][11]) looking at building a hub-and-spoke network today. However, Lightning Network’s bidirectional micropayment channel requires the malleability soft- fork described in Appendix A to enable near-infinite scalability while miti- gating risks of intermediate node default.

> 当前的交易状态下，这些交易可以被立即广播，或等待失效，通过为这个特定状态创建时间快照，就能利用比特币的交易脚本构建复杂的智能合约。此前，中心辐射型的微支付通道[7][8][9](以及可信支付通道[10][11])已经考虑了如何在今天构建一个中心辐射性微支付通道网络。但是，闪电网络的双向微支付通道需要比特币系统采取软分叉先解决附录中所描述的交易延展性问题，才能实现近乎无限的可扩展性，同时也能控制中间节点的出错风险。

By chaining together multiple micropayment channels, it is possible to create a network of transaction paths. Paths can be routed using a BGP- like system, and the sender may designate a particular path to the recipient. The output scripts are encumbered by a hash, which is generated by the recipient. By disclosing the input to that hash, the recipient’s counterparty will be able to pull funds along the route.

> 通过将多个微支付通道链接在一起，就有可能创建一个交易路径网络。路径可以使用类似BGP的协议进行路由，发送方可以指定特定的路径发送交易给接收方。输出脚本由接收方生成的散列来验证。通过提供散列的原像，接收方的交易对手就能够沿着这条路径传递资金。

### 3.1 The Problem of Blame in Channel Creation
### 3.1 通道创建中的责任问题

In order to participate in this payment network, one must create a micro- payment channel with another participant on this network.

> 为了参与到这个支付网络中来，一个人必须与这个网络上的另一个参与者创建一个微支付通道。

#### 3.1.1 Creating an Unsigned Funding Transaction
#### 3.1.1 创建一个未签署的保证金交易

An initial channel Funding Transaction is created whereby one or both chan- nel counterparties fund the inputs of this transaction. Both parties create the inputs and outputs for this transaction but do not sign the transaction.

> 最初的通道保证金交易需要交易的一方或交易双方为该交易的输入提供资金。双方参与创建这笔交易的输入和输出，但是先不对交易签名。

The output for this Funding Transaction is a single 2-of-2 multisigna-
ture script with both participants in this channel, henceforth named Alice and Bob. Both participants do not exchange signatures for the Funding Transaction until they have created spends from this 2-of-2 output refund- ing the original amount back to its respective funders. The purpose of not signing the transaction allows for one to spend from a transaction which does not yet exist. If Alice and Bob exchange the signatures from the Fund- ing Transaction without being able to broadcast spends from the Funding Transaction, the funds may be locked up forever if Alice and Bob do not cooperate (or other coin loss may occur through hostage scenarios whereby one pays for the cooperation from the counterparty).

> 这笔交易的输出是一个2/2多重签名地址，需要这个通道的双方参与者都同意才能花费这笔输出。我们按照惯例将通道两端的参与者命名为Alice和Bob。此时双方还不会为保证金交易交换签名，要先
